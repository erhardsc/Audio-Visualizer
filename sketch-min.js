function toggleSong(){song.isPlaying()?song.pause():song.play()}function preload(){song=loadSound("Atmosphere-Sunshine.mp3")}function setup(){createCanvas(window.innerWidth,window.innerHeight).parent("visualizer"),fft=new p5.FFT,fft.smooth(.95),dark=color("rgba(11, 10, 10, .65)"),grey=color("rgba(142, 137, 137, .65)"),purple=color("rgb(106, 63, 190)"),button=createButton("toggle"),button.mousePressed(toggleSong),song.play()}function windowResized(){resizeCanvas(window.innerWidth,window.innerHeight)}function draw(){background("rgb(22,25,37)"),noStroke();var e=frameRate();fill(255),stroke(0),text("FPS: "+e.toFixed(2),10,50);var r=fft.analyze(),t=splitOctaves(r,3),o=t.length;push(),fill(purple),noStroke(),beginShape(),curveVertex(0,height);for(var n=0;n<o;n++){var i=smoothPoint(t,n,2),h=map(n,0,o-1,0,width),a=map(i,0,255,height,.45*height);curveVertex(h,a)}curveVertex(width,height),endShape(CLOSE),pop(),push(),fill(grey),noStroke(),beginShape(),curveVertex(0,height);for(var n=0;n<o;n++){var i=smoothPoint(t,n),h=map(n,0,o-1,0,width),a=map(i,0,255,height,.65*height);curveVertex(h,a)}curveVertex(width,height),endShape(CLOSE),pop(),push(),fill(dark),noStroke(),beginShape(),curveVertex(0,height);for(var n=0;n<o;n++){var i=smoothPoint(t,n,4),h=map(n,0,o-1,0,width),a=map(i,0,255,height,.75*height);curveVertex(h,a)}curveVertex(width,height),endShape(CLOSE),pop()}function playerVisualizer(){push(),stroke(255),line(0,height/2,width,height/2);var e=fft.waveform();noFill(),beginShape(),stroke(255),strokeWeight(1);for(var r=0;r<e.length;r++){var t=map(r,0,e.length,0,width),o=map(e[r],-1,1,0,height);vertex(t,o)}endShape(),pop()}function splitOctaves(e,r){for(var t=[],o=e.length,n=r||3,i=Math.pow(2,1/n),h=r,a=o-1,g=a;g>h;){var p=round(a/i);if(1===p)return;var s=0,u=0;for(g=a;g>p;g--)s+=e[g],u++;var l=s/u;t.push(l),a=p}for(var v=g;v>0;v--)t.push(e[v]);return t.reverse(),t}function smoothPoint(e,r,t){for(var o=t||2,n=e.length,i=0,h=r-o,a=0,g=h;g<r+o&&g<n;g++)void 0!==e[g]&&(i+=e[g],a++);return i/=a}p5.disableFriendlyErrors=!0;var song,fft,button,radius,dark=color("rgba(11, 10, 10, .65)"),grey=color("rgba(142, 137, 137, .65)"),purple=color("rgb(106, 63, 190)");