function toggleSong(){song.isPlaying()?song.pause():song.play()}function preload(){song=loadSound("Atmosphere-Sunshine.mp3")}function setup(){createCanvas(window.innerWidth,window.innerHeight).parent("visualizer"),fft=new p5.FFT,fft.smooth(.95),dark=color("rgba(11, 10, 10, .65)"),grey=color("rgba(142, 137, 137, .65)"),purple=color("rgb(106, 63, 190)"),button=createButton("toggle"),button.mousePressed(toggleSong),song.play()}function windowResized(){resizeCanvas(window.innerWidth,window.innerHeight)}function draw(){background("rgb(22,25,37)"),noStroke();var e=frameRate();fill(255),stroke(0),text("FPS: "+e.toFixed(2),10,50);var r=fft.analyze(),t=splitOctaves(r,3),o=t.length;push(),fill(purple),noStroke(),beginShape(),curveVertex(0,height);for(var n=0;n<o;n++){var i=smoothPoint(t,n,2),a=map(n,0,o-1,0,width),h=map(i,0,255,height,.45*height);curveVertex(a,h)}curveVertex(width,height),endShape(CLOSE),pop(),push(),fill(grey),noStroke(),beginShape(),curveVertex(0,height);for(var n=0;n<o;n++){var i=smoothPoint(t,n),a=map(n,0,o-1,0,width),h=map(i,0,255,height,.65*height);curveVertex(a,h)}curveVertex(width,height),endShape(CLOSE),pop(),push(),fill(dark),noStroke(),beginShape(),curveVertex(0,height);for(var n=0;n<o;n++){var i=smoothPoint(t,n,4),a=map(n,0,o-1,0,width),h=map(i,0,255,height,.7*height);curveVertex(a,h)}curveVertex(width,height),endShape(CLOSE),pop()}function splitOctaves(e,r){for(var t=[],o=e.length,n=r||3,i=Math.pow(2,1/n),a=r,h=o-1,g=h;g>a;){var p=round(h/i);if(1===p)return;var u=0,s=0;for(g=h;g>p;g--)u+=e[g],s++;var l=u/s;t.push(l),h=p}for(var d=g;d>0;d--)t.push(e[d]);return t.reverse(),t}function smoothPoint(e,r,t){for(var o=t||2,n=e.length,i=0,a=r-o,h=0,g=a;g<r+o&&g<n;g++)void 0!==e[g]&&(i+=e[g],h++);return i/=h}p5.disableFriendlyErrors=!0;var song,fft,button,radius,dark=color("rgba(11, 10, 10, .65)"),grey=color("rgba(142, 137, 137, .65)"),purple=color("rgb(106, 63, 190)");