function toggleSong(){song.isPlaying()?song.pause():song.play()}function preload(){song=loadSound("Atmosphere-Sunshine.mp3")}function setup(){var e=createCanvas(window.innerWidth,window.innerHeight);e.parent("visualizer"),ctx=e.drawingContext,fft=new p5.FFT,fft.smooth(.95),peakDetect=new p5.PeakDetect;var t=color("rgba(11, 10, 10, .65)"),r=color("rgba(142, 137, 137, .65)"),i=color("rgb(106, 63, 190)");button=createButton("toggle"),button.mousePressed(toggleSong),song.play()}function windowResized(){resizeCanvas(window.innerWidth,window.innerHeight)}function amplitude(){var e=fft.analyze();peakDetect.update(fft);for(var t=0;t<e.length;t++){if(fft.getEnergy(150,250))var r=map(e[t],0,256,.15*width,.2*width),i=map(e[t],0,256,.45*height,.25*height),h=map(e[t],0,256,.35*width,.4*width),a=map(e[t],0,256,.85*height,.9*height);return[r,i,h,a,map(e[t],0,256,.55*width,.63*width),map(e[t],0,256,.75*height,.55*height),map(e[t],0,256,.8*width,.78*width),map(e[t],0,256,.8*height,.82*height),map(e[t],0,256,.92*width,.98*width),map(e[t],0,256,.58*height,.38*height)]}}function draw(){background("rgb(22,25,37)");var e=frameRate();fill(255),stroke(0),text("FPS: "+e.toFixed(2),10,50);var t=color("rgba(11, 10, 10, .65)"),r=color("rgba(142, 137, 137, .65)"),i=color("rgb(106, 63, 190)");noStroke();var h=fft.analyze(),a=[],o=splitOctaves(h,3),n=o.length;push(),fill(i),beginShape(),curveVertex(0,height);for(var g=0;g<n;g++){var p=smoothPoint(o,g,2),d=map(g,0,n-1,0,width),u=map(p,0,255,height,.45*height);curveVertex(d,u)}curveVertex(width,height),endShape(CLOSE),pop(),push(),fill(r),beginShape(),curveVertex(0,height);for(var g=0;g<n;g++){var p=smoothPoint(o,g,3),d=map(g,0,n-1,0,width),u=map(p,0,255,height,.65*height);curveVertex(d,u)}curveVertex(width,height),endShape(CLOSE),pop(),push(),fill(t),beginShape(),curveVertex(0,height);for(var g=0;g<n;g++){var p=smoothPoint(o,g,5),d=map(g,0,n-1,0,width),u=map(p,0,255,height,.7*height);curveVertex(d,u)}curveVertex(width,height),endShape(CLOSE),pop()}function splitOctaves(e,t){for(var r=[],i=e.length,h=t||3,a=Math.pow(2,1/h),o=t,n=i-1,g=n;g>o;){var p=round(n/a);if(1===p)return;var d=0,u=0;for(g=n;g>p;g--)d+=e[g],u++;var v=d/u;r.push(v),n=p}for(var s=g;s>0;s--)r.push(e[s]);return r.reverse(),r}function smoothPoint(e,t,r){for(var i=r||2,h=e.length,a=0,o=t-i,n=0,g=o;g<t+i&&g<h;g++)void 0!==e[g]&&(a+=e[g],n++);return a/=n}p5.disableFriendlyErrors=!0;var song,fft,button,radius,ctx,peakDetect,wave,wave2,wave3;